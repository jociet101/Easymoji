<!DOCTYPE html>
<html>
<head>
  <title>Easymoji</title>

  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="index.css" />

  <!-- Logo Icon -->
  <link rel="icon" type="image/x-icon" href="logo.jpg" />

</head>
<body>
    <h1>Easymoji</h1>
    <p>We use emojis teehee</p>
    <ul>
      <li>Instruction 1</li>
      <li>Instruction 2</li>
      <li>Instruction 3</li>
    </ul>
    <br><br>
    <div class="grid-container">
        <div class = "code-area">
            <div class = "code-area-header-editor">
                <h1>Editor</h1>
                <button onclick="buttonFunc()">Test</button>
            </div>
            <textarea id="user_input" class="code-box" name="user_input"></textarea>
        </div>
        <div class = "code-area">
            <div class = "code-area-header-shell">
                <h1>Shell</h1>
                <button>Clear</button>
                <button>Copy</button>
            </div>
            <textarea id="output" class="code-box" name="output" ></textarea>
        </div>
    </div>
    
</body>
<script>
    (()=>{
        const console_log = window.console.log;
        window.console.log = function(...args){
            console_log(...args);
            var textarea = document.getElementById('output');
            if(!textarea) return;
            args.forEach(arg=>textarea.value += `${arg}\n`);
        }
    })();
    const buttonFunc = async () => {
        var user_in = document.getElementById("user_input").value;
        // console.log(user_in);

        const rawResponse = await fetch('http://localhost:3000/codegen', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ "user_input": user_in })
        });
        const content = await rawResponse.json();
        eval(content);
        
    }
</script>
</html>